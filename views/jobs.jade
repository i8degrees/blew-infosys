extends layout

mixin print_field()
  if arguments != null
    if arguments[0] && arguments[1]
      p #{arguments[0]} #{arguments[1]}
    else if arguments[1]
      p #{arguments[1]}

block content
  script.
    function go_back() {
      window.history.back();
    }

  a(href="" onclick="go_back()") Go Back

  h2 Jobs

  if results.length > 0
    p Results: #{results.length}
    each job in results

      +print_field("job_id: ", job.PropertyKey)
      +print_field("Client: ", job.JobContact)
      +print_field("Job Number: ", job.JobNum)
      +print_field("Address: ", job.JobAddress)
      +print_field("City: ", job.JobCity)
      +print_field("Notes: ", job.Notes)
      +print_field("Notes: ", job.JobNotes)

      //- FIXME(jeff): Find a better way of doing this that is **outside** of
      //- the Jade template.
      - var status_str = '';
      if job.JobStatus == 0
        - status_str = "Not assigned";
      else if job.JobStatus == 1
        - status_str = "Fieldwork";
      if job.JobStatus == 2
        - status_str = "Drafting";
      else if job.JobStatus == 3
        - status_str = "Review";
      else if job.JobStatus == 4
        - status_str = "Completed";
      p Job Status:
        b #{status_str}

      +print_field("Due date: ", job.JobDateNeeded)
      +print_field("Created: ", job.DateCreated)
      +print_field("Edited: ", job.DateEdited)

      hr
      // TODO: Validate!
      a(href='/jobs/' + job.PropertyKey) edit
      &#32;-&#32;
      a(href='/jobs/destroy' + job.PropertyKey) destroy

      hr
