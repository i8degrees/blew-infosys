extends layout

mixin print_field()
  if arguments != null
    if arguments[0] && arguments[1]
      p #{arguments[0]} #{arguments[1]}
    else if arguments[1]
      p #{arguments[1]}

block content
  script.
    function go_back() {
      window.history.back();
    }

  a(href="" onclick="go_back()") Go Back

  h2 Jobs

  if results.length > 0
    p Results: #{results.length}
    each job in results

      +print_field("job_id: ", job.PropertyKey)
      +print_field("Job number: ", job.JobNum)
      +print_field("Contact: ", job.JobContact)
      //- +print_field("Requested by: ", job.JobRequestedBy)
      +print_field("Notes: ", job.Notes)
      +print_field("Notes: ", job.JobNotes)

      - var status_str = '';
      if job.JobStatus == 1
        - status_str = "Ordered";
      if job.JobStatus == 2
        - status_str = "In the field";
      else if job.JobStatus == 3
        - status_str = "In drafting";
      else if job.JobStatus == 4
        - status_str = "Needs Review";
      else if job.JobStatus == 5
        - status_str = "In Revision";
      else if job.JobStatus == 6
        - status_str = "Completed";
      else
        //- NOTE(jeff): NULL values
        - status_str = "Not assigned";
      p Job Status:
        b #{status_str}

      +print_field("Due date: ", job.JobDateNeeded)
      +print_field("Created: ", job.DateCreated)
      +print_field("Edited: ", job.DateEdited)

      hr
      // TODO: Validate!
      a(href='/jobs/' + job.PropertyKey) edit
      &#32;-&#32;
      a(href='/jobs/destroy' + job.PropertyKey) destroy

      hr
